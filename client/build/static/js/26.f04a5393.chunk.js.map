{"version":3,"sources":["functions/user.js","components/nav/UserNav.js","components/cards/ShowPaymentInfo.js","components/order/Invoice.js","pages/user/History.js"],"names":["userCart","cart","authtoken","a","axios","post","process","headers","getUserCart","get","emptyUserCart","delete","saveUserAddress","address","applyCoupon","coupon","createOrder","stripeResponse","getUserOrders","getWishlist","removeWishlist","productId","put","addToWishlist","createCashOrderForUser","COD","couponTrueOrFalse","couponApplied","UserNav","className","to","ShowPaymentInfo","order","showStatus","paymentIntent","id","amount","currency","toUpperCase","payment_method_types","status","Date","created","toLocaleString","orderStatus","styles","StyleSheet","create","body","paddingTop","paddingBottom","paddingHorizontal","title","fontSize","textAlign","author","marginBottom","subtitle","margin","text","image","marginVertical","marginHorizontal","header","color","footer","padding","pageNumber","position","bottom","left","right","Invoice","style","fixed","data","products","getContent","x","product","price","count","brand","History","useState","orders","setOrders","user","useSelector","state","useEffect","loadUserOrders","token","then","res","showOrderInTable","scope","shipping","CheckCircleOutlined","CloseCircleOutlined","showDownloadLink","document","fileName","length","reverse","map","i"],"mappings":"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","file":"static/js/26.f04a5393.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const userCart = async (cart, authtoken) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/cart`,\n    { cart },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const getUserCart = async (authtoken) => {\n  return axios.get(`${process.env.REACT_APP_API}/user/cart`, {\n    headers: {\n      authtoken,\n    },\n  });\n};\n\nexport const emptyUserCart = async (authtoken) => {\n  return axios.delete(`${process.env.REACT_APP_API}/user/cart`, {\n    headers: {\n      authtoken,\n    },\n  });\n};\n\nexport const saveUserAddress = async (authtoken, address) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/address`,\n    { address },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const applyCoupon = async (authtoken, coupon) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/cart/coupon`,\n    { coupon },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const createOrder = async (stripeResponse, authtoken) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/order`,\n    { stripeResponse },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const getUserOrders = async (authtoken) => {\n  return axios.get(`${process.env.REACT_APP_API}/user/orders`, {\n    headers: {\n      authtoken,\n    },\n  });\n};\n\nexport const getWishlist = async (authtoken) => {\n  return axios.get(`${process.env.REACT_APP_API}/user/wishlist`, {\n    headers: {\n      authtoken,\n    },\n  });\n};\n\nexport const removeWishlist = async (productId, authtoken) => {\n  return axios.put(\n    `${process.env.REACT_APP_API}/user/wishlist/${productId}`,\n    {},\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const addToWishlist = async (productId, authtoken) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/wishlist`,\n    {\n      productId,\n    },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const createCashOrderForUser = async (\n  authtoken,\n  COD,\n  couponTrueOrFalse\n) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/cash-order`,\n    { couponApplied: couponTrueOrFalse, COD },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst UserNav = () => {\n  return (\n    <nav>\n      <ul className=\"nav flex-column\">\n        <li className=\"nav-item\">\n          <Link to=\"/user/history\" className=\"nav-link\">\n            History\n          </Link>\n        </li>\n\n        <li className=\"nav-item\">\n          <Link to=\"/user/password\" className=\"nav-link\">\n            Password\n          </Link>\n        </li>\n\n        <li className=\"nav-item\">\n          <Link to=\"/user/wishlist\" className=\"nav-link\">\n            Wishlist\n          </Link>\n        </li>\n      </ul>\n    </nav>\n  );\n};\n\nexport default UserNav;\n","import React from \"react\";\n\nconst ShowPaymentInfo = ({ order, showStatus = true }) => {\n  return (\n    <div>\n      <p>\n        <span>Order Id: {order.paymentIntent.id} </span>\n        <br />\n        <span>Amount: {order.paymentIntent.amount * 100}</span>\n        <br />\n        <span>Currency: {order.paymentIntent.currency.toUpperCase()}</span>\n        <br />\n        <span>Method: {order.paymentIntent.payment_method_types[0]}</span>\n        <br />\n        <span>Payment: {order.paymentIntent.status.toUpperCase()}</span>\n        <br />\n        <span>\n          Ordered On:{\" \"}\n          {new Date(order.paymentIntent.created * 1000).toLocaleString()}\n        </span>\n        <br />\n        {showStatus && (\n          <span className=\"badge bg-primary text-white\">\n            STATUS: {order.orderStatus}\n          </span>\n        )}{\" \"}\n      </p>\n    </div>\n  );\n};\n\nexport default ShowPaymentInfo;\n","import React from \"react\";\nimport { Document, Page, Text, StyleSheet } from \"@react-pdf/renderer\";\nimport {\n  Table,\n  TableHeader,\n  TableCell,\n  TableBody,\n  DataTableCell,\n} from \"@david.kucsai/react-pdf-table\";\n\nconst Invoice = ({ order }) => (\n  <Document>\n    <Page style={styles.body}>\n      <Text style={styles.header} fixed>\n        ~ {new Date().toLocaleString()} ~\n      </Text>\n      <Text style={styles.title}>Order Invoice</Text>\n      <Text style={styles.author}>Easy Buy Store</Text>\n      <Text style={styles.subtitle}>Order Summary</Text>\n\n      <Table>\n        <TableHeader>\n          <TableCell>Title</TableCell>\n          <TableCell>Price</TableCell>\n          <TableCell>Quantity</TableCell>\n          <TableCell>Brand</TableCell>\n          <TableCell>Color</TableCell>\n        </TableHeader>\n      </Table>\n\n      <Table data={order.products}>\n        <TableBody>\n          <DataTableCell getContent={(x) => x.product.title} />\n          <DataTableCell getContent={(x) => `â‚¹ ${x.product.price}`} />\n          <DataTableCell getContent={(x) => x.count} />\n          <DataTableCell getContent={(x) => x.product.brand} />\n          <DataTableCell getContent={(x) => x.product.color} />\n        </TableBody>\n      </Table>\n\n      <Text style={styles.text}>\n        <Text>\n          Date: {\"               \"}\n          {new Date(order.paymentIntent.created * 1000).toLocaleString()}\n        </Text>\n        {\"\\n\"}\n        <Text>\n          Order Id: {\"         \"}\n          {order.paymentIntent.id}\n        </Text>\n        {\"\\n\"}\n        <Text>\n          Order Status: {\"  \"}\n          {order.orderStatus}\n        </Text>\n        {\"\\n\"}\n        <Text>\n          Total Paid: {\"       \"}\n          {order.paymentIntent.amount}\n        </Text>\n      </Text>\n\n      <Text style={styles.footer}>\n        {\" \"}\n        ~ Thank you for shopping with Easy Buy ~{\" \"}\n      </Text>\n    </Page>\n  </Document>\n);\n\nconst styles = StyleSheet.create({\n  body: {\n    paddingTop: 35,\n    paddingBottom: 65,\n    paddingHorizontal: 35,\n  },\n  title: {\n    fontSize: 24,\n    textAlign: \"center\",\n  },\n  author: {\n    fontSize: 12,\n    textAlign: \"center\",\n    marginBottom: 40,\n  },\n  subtitle: {\n    fontSize: 18,\n    margin: 12,\n  },\n  text: {\n    margin: 12,\n    fontSize: 14,\n    textAlign: \"justify\",\n  },\n  image: {\n    marginVertical: 15,\n    marginHorizontal: 100,\n  },\n  header: {\n    fontSize: 12,\n    marginBottom: 20,\n    textAlign: \"center\",\n    color: \"grey\",\n  },\n  footer: {\n    padding: \"100px\",\n    fontSize: 12,\n    marginBottom: 20,\n    textAlign: \"center\",\n    color: \"grey\",\n  },\n  pageNumber: {\n    position: \"absolute\",\n    fontSize: 12,\n    bottom: 30,\n    left: 0,\n    right: 0,\n    textAlign: \"center\",\n    color: \"grey\",\n  },\n});\n\nexport default Invoice;\n","import React, { useState, useEffect } from \"react\";\nimport UserNav from \"../../components/nav/UserNav\";\nimport { getUserOrders } from \"../../functions/user\";\nimport { useSelector } from \"react-redux\";\nimport { CheckCircleOutlined, CloseCircleOutlined } from \"@ant-design/icons\";\nimport ShowPaymentInfo from \"../../components/cards/ShowPaymentInfo\";\nimport { PDFDownloadLink } from \"@react-pdf/renderer\";\nimport Invoice from \"../../components/order/Invoice\";\n\nconst History = () => {\n  const [orders, setOrders] = useState([]);\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadUserOrders();\n  }, []);\n\n  const loadUserOrders = () => {\n    getUserOrders(user.token).then((res) => {\n      setOrders(res.data);\n    });\n  };\n  const showOrderInTable = (order) => (\n    <table className=\"table table-bordered\">\n      <thead className=\"thead-light\">\n        <tr>\n          <th scope=\"col\">Title</th>\n          <th scope=\"col\">Price</th>\n          <th scope=\"col\">Brand</th>\n          <th scope=\"col\">Color</th>\n          <th scope=\"col\">Count</th>\n          <th scope=\"col\">Shipping</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td>\n            <b>{order.products[0].product.title}</b>\n          </td>\n          <td>\n            {(order.paymentIntent.amount /= 100).toLocaleString(\"en-IN\", {\n              style: \"currency\",\n              currency: \"INR\",\n            })}\n          </td>\n          <td>{order.products[0].product.brand}</td>\n          <td>{order.products[0].product.color}</td>\n          <td>{order.products[0].count}</td>\n          <td>\n            {order.products[0].product.shipping === \"Yes\" ? (\n              <CheckCircleOutlined style={{ color: \"green\" }} />\n            ) : (\n              <CloseCircleOutlined style={{ color: \"red\" }} />\n            )}\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  );\n\n  const showDownloadLink = (order) => (\n    <PDFDownloadLink\n      document={<Invoice order={order} />}\n      fileName=\"invoice.pdf\"\n      className=\"btn btn-sm btn-block btn-outline-primary\"\n    >\n      Download PDF\n    </PDFDownloadLink>\n  );\n\n  const showEachOrders = () =>\n    orders &&\n    orders.reverse().map((order, i) => (\n      <div key={i} className=\"m-5 p-3 card\">\n        <p>\n          <ShowPaymentInfo order={order} />\n        </p>\n\n        {showOrderInTable(order)}\n        <div className=\"row\">\n          <div className=\"col\">{showDownloadLink(order)}</div>\n        </div>\n      </div>\n    ));\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <UserNav />\n        </div>\n        <div className=\"col text-center\">\n          <h4>\n            {\" \"}\n            {orders.length > 0 ? \"User purchase orders\" : \"No purchase orders\"}\n          </h4>\n          {showEachOrders()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default History;\n"],"sourceRoot":""}