{"version":3,"sources":["functions/user.js","components/cards/ProductCardInCheckout.js","pages/Cart.js"],"names":["userCart","cart","authtoken","a","axios","post","process","headers","getUserCart","get","emptyUserCart","delete","saveUserAddress","address","applyCoupon","coupon","createOrder","stripeResponse","getUserOrders","getWishlist","removeWishlist","productId","put","addToWishlist","createCashOrderForUser","COD","couponTrueOrFalse","couponApplied","ProductCardInCheckout","p","dispatch","useDispatch","style","width","height","images","length","large","url","small","title","price","brand","className","name","onChange","e","window","localStorage","getItem","JSON","parse","map","product","i","_id","color","target","value","setItem","stringify","type","payload","handleColorChange","filter","c","count","quantity","toast","error","handleQuantityChange","shipping","CheckCircleOutlined","CloseCircleOutlined","CloseOutlined","onClick","splice","Cart","history","useSelector","state","user","scope","to","reduce","currentValue","nextValue","token","then","res","console","log","data","ok","push","catch","err","disabled","pathname","from"],"mappings":"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","file":"static/js/40.f1e9de69.chunk.js","sourcesContent":["import axios from \"axios\";\n\nexport const userCart = async (cart, authtoken) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/cart`,\n    { cart },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const getUserCart = async (authtoken) => {\n  return axios.get(`${process.env.REACT_APP_API}/user/cart`, {\n    headers: {\n      authtoken,\n    },\n  });\n};\n\nexport const emptyUserCart = async (authtoken) => {\n  return axios.delete(`${process.env.REACT_APP_API}/user/cart`, {\n    headers: {\n      authtoken,\n    },\n  });\n};\n\nexport const saveUserAddress = async (authtoken, address) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/address`,\n    { address },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const applyCoupon = async (authtoken, coupon) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/cart/coupon`,\n    { coupon },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const createOrder = async (stripeResponse, authtoken) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/order`,\n    { stripeResponse },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const getUserOrders = async (authtoken) => {\n  return axios.get(`${process.env.REACT_APP_API}/user/orders`, {\n    headers: {\n      authtoken,\n    },\n  });\n};\n\nexport const getWishlist = async (authtoken) => {\n  return axios.get(`${process.env.REACT_APP_API}/user/wishlist`, {\n    headers: {\n      authtoken,\n    },\n  });\n};\n\nexport const removeWishlist = async (productId, authtoken) => {\n  return axios.put(\n    `${process.env.REACT_APP_API}/user/wishlist/${productId}`,\n    {},\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const addToWishlist = async (productId, authtoken) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/wishlist`,\n    {\n      productId,\n    },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n\nexport const createCashOrderForUser = async (\n  authtoken,\n  COD,\n  couponTrueOrFalse\n) => {\n  return axios.post(\n    `${process.env.REACT_APP_API}/user/cash-order`,\n    { couponApplied: couponTrueOrFalse, COD },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n","import React from \"react\";\nimport ModalImage from \"react-modal-image\";\nimport { useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport {\n  CheckCircleOutlined,\n  CloseCircleOutlined,\n  CloseOutlined,\n} from \"@ant-design/icons\";\n\nconst ProductCardInCheckout = ({ p }) => {\n  const colors = [\"Black\", \"Brown\", \"Silver\", \"White\", \"Blue\"];\n\n  const dispatch = useDispatch();\n\n  const handleColorChange = (e) => {\n    let cart = [];\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n      cart.map((product, i) => {\n        if (product._id === p._id) {\n          cart[i].color = e.target.value;\n        }\n      });\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  const handleQuantityChange = (e) => {\n    let count = e.target.value < 1 ? 1 : e.target.value;\n\n    if (count > p.quantity) {\n      toast.error(`Max available quantity: ${p.quantity}`);\n      return;\n    }\n\n    let cart = [];\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n      cart.map((product, i) => {\n        if (product._id == p._id) {\n          cart[i].count = count;\n        }\n      });\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  const handleRemove = () => {\n    let cart = [];\n    if (typeof window !== \"undefined\") {\n      if (localStorage.getItem(\"cart\")) {\n        cart = JSON.parse(localStorage.getItem(\"cart\"));\n      }\n      cart.map((product, i) => {\n        if (product._id === p._id) {\n          cart.splice(i, 1);\n        }\n      });\n      localStorage.setItem(\"cart\", JSON.stringify(cart));\n      dispatch({\n        type: \"ADD_TO_CART\",\n        payload: cart,\n      });\n    }\n  };\n\n  return (\n    <tbody>\n      <tr>\n        <td>\n          <div style={{ width: \"100px\", height: \"auto\" }}>\n            {p.images.length > 0 ? (\n              <ModalImage large={p.images[0].url} small={p.images[0].url} />\n            ) : (\n              <ModalImage\n                large={`https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQn-SJgS0wvz4a8Y2QXVrZ5iDwFpTbK9ilTqg&usqp=CAU`}\n                small={`https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQn-SJgS0wvz4a8Y2QXVrZ5iDwFpTbK9ilTqg&usqp=CAU`}\n              />\n            )}\n          </div>\n        </td>\n        <td>{p.title}</td>\n        <td>{p.price}</td>\n        <td>{p.brand}</td>\n        <td>\n          <select\n            className=\"form-control\"\n            name=\"color\"\n            onChange={(e) => handleColorChange(e)}\n          >\n            {p.color ? (\n              <option value={p.color}>{p.color}</option>\n            ) : (\n              <option>Select</option>\n            )}\n            {colors\n              .filter((c) => c !== p.color)\n              .map((c) => (\n                <option key={c} value={c}>\n                  {c}\n                </option>\n              ))}\n          </select>\n        </td>\n        <td className=\"text-center\">\n          <input\n            type=\"number\"\n            className=\"form-control\"\n            value={p.count}\n            onChange={(e) => handleQuantityChange(e)}\n          />\n        </td>\n        <td className=\"text-center\">\n          {p.shipping === \"Yes\" ? (\n            <CheckCircleOutlined className=\"text-success\" />\n          ) : (\n            <CloseCircleOutlined className=\"text-danger\" />\n          )}\n        </td>\n        <td className=\"text-center\">\n          <CloseOutlined\n            className=\"text-danger pointer\"\n            onClick={handleRemove}\n          />\n        </td>\n      </tr>\n    </tbody>\n  );\n};\n\nexport default ProductCardInCheckout;\n","import React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport ProductCardInCheckout from \"../components/cards/ProductCardInCheckout\";\nimport { userCart } from \"../functions/user\";\n\nconst Cart = ({ history }) => {\n  const { cart, user } = useSelector((state) => ({ ...state }));\n  const dispatch = useDispatch();\n\n  //   [1,2] => 100+200 = 300\n  const getTotal = () => {\n    return cart.reduce((currentValue, nextValue) => {\n      return currentValue + nextValue.count * nextValue.price;\n    }, 0);\n  };\n\n  const saveOrderToDb = () => {\n    userCart(cart, user.token)\n      .then((res) => {\n        console.log(\"cart\", res);\n        if (res.data.ok) history.push(\"/checkout\");\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const saveCashOrderToDb = () => {\n    dispatch({\n      type: \"COD\",\n      payload: true,\n    });\n    userCart(cart, user.token)\n      .then((res) => {\n        console.log(\"cart\", res);\n        if (res.data.ok) history.push(\"/checkout\");\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const showCartItems = () => (\n    <table className=\"table table-bordered\">\n      <thead className=\"thead-light\">\n        <tr>\n          <th scope=\"col\">Image</th>\n          <th scope=\"col\">Title</th>\n          <th scope=\"col\">Price</th>\n          <th scope=\"col\">Brand</th>\n          <th scope=\"col\">Color</th>\n          <th scope=\"col\">Count</th>\n          <th scope=\"col\">Shipping</th>\n          <th scope=\"col\">Remove</th>\n        </tr>\n      </thead>\n      {cart && cart.map((p) => <ProductCardInCheckout key={p._id} p={p} />)}\n    </table>\n  );\n\n  return (\n    <div className=\"container-fluid pt-2\">\n      <div className=\"row\">\n        <div className=\"col-md-8\">\n          <h4>Cart / {cart.length} Product</h4>\n\n          {!cart.length ? (\n            <p>\n              No Products in cart.\n              <Link to=\"/shop\">Continue Shopping</Link>\n            </p>\n          ) : (\n            showCartItems()\n          )}\n        </div>\n        <div className=\"col-md-4\">\n          <h4>Order Summary</h4>\n          <hr />\n          <p>Products</p>\n          {cart &&\n            cart.map((c, i) => (\n              <div key={i}>\n                <p>\n                  {c.title} x {c.count} = ₹{c.price * c.count}{\" \"}\n                </p>\n              </div>\n            ))}\n          <hr />\n          Total: <b>₹{getTotal()}</b>\n          <hr />\n          {user ? (\n            <>\n              <button\n                onClick={saveOrderToDb}\n                disabled={!cart.length}\n                className=\"btn btn-sm btn-primary mt-2\"\n              >\n                Proceed to Checkout\n              </button>\n              <br />\n              <button\n                onClick={saveCashOrderToDb}\n                disabled={!cart.length}\n                className=\"btn btn-sm btn-warning mt-2\"\n              >\n                Cash on Delivery\n              </button>\n            </>\n          ) : (\n            <button className=\"btn btn-sm btn-primary mt-2\">\n              <Link\n                to={{\n                  pathname: \"/login\",\n                  state: { from: \"cart\" },\n                }}\n              >\n                Login to Checkout\n              </Link>\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Cart;\n"],"sourceRoot":""}