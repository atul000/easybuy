(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[41],{171:function(t,e,r){"use strict";r.d(e,"k",(function(){return o})),r.d(e,"f",(function(){return i})),r.d(e,"e",(function(){return p})),r.d(e,"j",(function(){return d})),r.d(e,"b",(function(){return b})),r.d(e,"d",(function(){return h})),r.d(e,"g",(function(){return l})),r.d(e,"h",(function(){return j})),r.d(e,"i",(function(){return f})),r.d(e,"a",(function(){return O})),r.d(e,"c",(function(){return y}));var n=r(12),a=r.n(n),c=r(17),s=r(25),u=r.n(s),o=function(){var t=Object(c.a)(a.a.mark((function t(e,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.post("".concat("https://easybuyserver.herokuapp.com/api","/user/cart"),{cart:e},{headers:{authtoken:r}}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),i=function(){var t=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.get("".concat("https://easybuyserver.herokuapp.com/api","/user/cart"),{headers:{authtoken:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.delete("".concat("https://easybuyserver.herokuapp.com/api","/user/cart"),{headers:{authtoken:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(c.a)(a.a.mark((function t(e,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.post("".concat("https://easybuyserver.herokuapp.com/api","/user/address"),{address:r},{headers:{authtoken:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),b=function(){var t=Object(c.a)(a.a.mark((function t(e,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.post("".concat("https://easybuyserver.herokuapp.com/api","/user/cart/coupon"),{coupon:r},{headers:{authtoken:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),h=function(){var t=Object(c.a)(a.a.mark((function t(e,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.post("".concat("https://easybuyserver.herokuapp.com/api","/user/order"),{stripeResponse:e},{headers:{authtoken:r}}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),l=function(){var t=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.get("".concat("https://easybuyserver.herokuapp.com/api","/user/orders"),{headers:{authtoken:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(c.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.get("".concat("https://easybuyserver.herokuapp.com/api","/user/wishlist"),{headers:{authtoken:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(c.a)(a.a.mark((function t(e,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.put("".concat("https://easybuyserver.herokuapp.com/api","/user/wishlist/").concat(e),{},{headers:{authtoken:r}}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),O=function(){var t=Object(c.a)(a.a.mark((function t(e,r){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.post("".concat("https://easybuyserver.herokuapp.com/api","/user/wishlist"),{productId:e},{headers:{authtoken:r}}));case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),y=function(){var t=Object(c.a)(a.a.mark((function t(e,r,n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",u.a.post("".concat("https://easybuyserver.herokuapp.com/api","/user/cash-order"),{couponApplied:n,COD:r},{headers:{authtoken:e}}));case 1:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}()},940:function(t,e,r){"use strict";r.r(e);var n=r(30),a=r(110),c=r(2),s=r(0),u=r(23),o=r(41),i=r(171),p=r(768),d=r.n(p);r(866);e.default=function(t){var e=t.history,r=Object(s.useState)([]),p=Object(a.a)(r,2),b=p[0],h=p[1],l=Object(s.useState)(0),j=Object(a.a)(l,2),f=j[0],O=j[1],y=Object(s.useState)(""),m=Object(a.a)(y,2),v=m[0],k=m[1],x=Object(s.useState)(!1),w=Object(a.a)(x,2),C=w[0],g=w[1],N=Object(s.useState)(""),P=Object(a.a)(N,2),S=P[0],A=P[1],D=Object(s.useState)(0),T=Object(a.a)(D,2),_=T[0],I=T[1],E=Object(s.useState)(""),J=Object(a.a)(E,2),L=J[0],R=J[1],U=Object(u.b)(),F=Object(u.c)((function(t){return Object(n.a)({},t)})),G=F.user,q=F.COD,z=Object(u.c)((function(t){return t.coupon}));Object(s.useEffect)((function(){Object(i.f)(G.token).then((function(t){console.log("user cart res",JSON.stringify(t.data,null,4)),h(t.data.products),O(t.data.cartTotal)}))}),[]);var B=function(){Object(i.j)(G.token,v).then((function(t){t.data.ok&&(g(!0),o.b.success("Address Saved"))}))},H=function(){Object(i.b)(G.token,S).then((function(t){console.log("coupon applied",t),t.data&&(I(t.data),U({type:"COUPON_APPLIED",payload:!0})),t.data.err&&(R(t.data.err),U({type:"COUPON_APPLIED",payload:!1}))}))};return Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col-md-6",children:[Object(c.jsx)("h4",{children:"Delivery Address"}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(d.a,{theme:"snow",value:v,onChange:k}),Object(c.jsx)("button",{className:"btn btn-primary mt-2",onClick:B,children:"Save"})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("h4",{children:"Got Coupon?"}),L&&Object(c.jsx)("p",{className:"text-danger p-2",children:L}),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("input",{onChange:function(t){A(t.target.value),R("")},value:S,type:"text",className:"form-control"}),Object(c.jsx)("button",{onClick:H,className:"btn btn-primary mt-2",children:"Apply"})]}),Object(c.jsx)("br",{})]}),Object(c.jsxs)("div",{className:"col-md-6",children:[Object(c.jsx)("h4",{children:"Order Summary"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("p",{children:["Products ",b.length]}),Object(c.jsx)("hr",{}),b.map((function(t,e){return Object(c.jsx)("div",{children:Object(c.jsxs)("p",{children:[t.product.title," (",t.color,") x ",t.count," ="," ",t.product.price*t.count]})},e)})),Object(c.jsx)("hr",{}),Object(c.jsxs)("p",{children:["Cart Total: ",f]}),_>0&&Object(c.jsxs)("p",{className:"text-success p-2",children:["Coupon Applied!!",Object(c.jsx)("br",{}),"Total Payble: ",_]}),Object(c.jsxs)("div",{className:"row",children:[Object(c.jsx)("div",{className:"col-md-6",children:q?Object(c.jsx)("button",{disabled:!C||!b.length,className:"btn btn-primary",onClick:function(){Object(i.c)(G.token,q,z).then((function(t){console.log("COD",t),t.data.ok&&("undefined"!==typeof window&&localStorage.removeItem("cart"),U({type:"ADD_TO_CART",payload:[]}),U({type:"COUPON_APPLIED",payload:!1}),U({type:"COD",payload:!1}),Object(i.e)(G.token),setTimeout((function(){e.push("/user/history")}),1e3))}))},children:"Place Order"}):Object(c.jsx)("button",{disabled:!C||!b.length,className:"btn btn-primary",onClick:function(){return e.push("/payment")},children:"Place Order"})}),Object(c.jsx)("div",{className:"col-md-6",children:Object(c.jsx)("button",{disabled:!b.length,onClick:function(){"undefined"!==typeof window&&localStorage.removeItem("cart"),U({type:"ADD_TO_CART",payload:[]}),Object(i.e)(G.token).then((function(t){h([]),O(0),I(0),A(""),o.b.success("Cart is emapty. Contniue shopping.")}))},className:"btn btn-primary",children:"Empty Cart"})})]})]})]})}}}]);
//# sourceMappingURL=41.0d25f09e.chunk.js.map