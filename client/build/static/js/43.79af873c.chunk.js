(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[43],{925:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a.n(n),c=a(17),s=a(30),o=a(110),i=a(2),u=a(0),l=a(29),d=a(42),b=a(41),j=a(955),p=a(956),h=a(311),m=a(23),f=a(43);t.default=function(e){var t=e.history,a=Object(u.useState)(""),n=Object(o.a)(a,2),O=n[0],g=n[1],x=Object(u.useState)(""),v=Object(o.a)(x,2),k=v[0],w=v[1],y=Object(u.useState)(!1),N=Object(o.a)(y,2),E=N[0],_=N[1],I=Object(m.b)(),L=Object(m.c)((function(e){return Object(s.a)({},e)})).user;Object(u.useEffect)((function(){t.location.state||L&&L.token&&t.push("/")}),[L,t]);var S=function(e){var a=t.location.state;a?t.push(a.from):"admin"===e.data.role?t.push("/admin/dashboard"):t.push("/user/history")},G=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),_(!0),e.prev=2,e.next=5,d.a.signInWithEmailAndPassword(O,k);case 5:return a=e.sent,n=a.user,e.next=9,n.getIdTokenResult();case 9:c=e.sent,Object(f.a)(c.token).then((function(e){I({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:c.token,role:e.data.role,_id:e.data._id}}),S(e)})).catch((function(e){return console.log(e)})),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),b.b.error(e.t0.message),_(!1);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.a.signInWithPopup(d.b).then(function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.user,e.next=3,a.getIdTokenResult();case 3:n=e.sent,Object(f.a)(n.token).then((function(e){I({type:"LOGGED_IN_USER",payload:{name:e.data.name,email:e.data.email,token:n.token,role:e.data.role,_id:e.data._id}}),S(e)})).catch((function(e){return console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){b.b.error(e.message)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(i.jsx)("div",{className:"container p-5",children:Object(i.jsx)("div",{className:"row",children:Object(i.jsxs)("div",{className:"col-md-6 offset-md-3",children:[E?Object(i.jsx)("h4",{className:"text-danger",children:"Loading..."}):Object(i.jsx)("h4",{children:"Login"}),Object(i.jsxs)("form",{onSubmit:G,children:[Object(i.jsx)("div",{className:"form-group",children:Object(i.jsx)("input",{type:"email",className:"form-control",value:O,onChange:function(e){return g(e.target.value)},placeholder:"Email",autoFocus:!0})}),Object(i.jsx)("br",{}),Object(i.jsx)("div",{className:"form-group",children:Object(i.jsx)("input",{type:"password",className:"form-control",value:k,onChange:function(e){return w(e.target.value)},placeholder:"Password",autoFocus:!0})}),Object(i.jsx)("br",{}),Object(i.jsx)(h.a,{onClick:G,type:"primary",className:"mb-2",block:!0,shape:"round",icon:Object(i.jsx)(j.a,{}),size:"large",disabled:!O||k.length<6,children:"Login with Email/Password"})]}),Object(i.jsx)(h.a,{onClick:P,type:"danger",className:"mb-3",block:!0,shape:"round",icon:Object(i.jsx)(p.a,{}),size:"large",children:"Login with Google"}),Object(i.jsx)(l.b,{className:"float-right text-danger",to:"/forgot/password",children:"Forgot Password"})]})})})}}}]);
//# sourceMappingURL=43.79af873c.chunk.js.map