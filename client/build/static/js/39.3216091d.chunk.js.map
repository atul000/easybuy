{"version":3,"sources":["components/nav/AdminNav.js","functions/coupon.js","pages/admin/coupon/CreateCouponPage.js"],"names":["AdminNav","className","to","getCoupons","a","axios","get","process","removeCoupon","couponId","authtoken","delete","headers","createCoupon","coupon","post","CreateCouponPage","useState","name","setName","expiry","setExpiry","discount","setDiscount","loading","setLoading","coupons","setCoupons","user","useSelector","state","useEffect","loadAllCoupons","then","res","data","onSubmit","e","preventDefault","token","console","log","errors","message","toast","error","success","catch","err","type","onChange","target","value","autoFocus","required","selected","Date","date","length","scope","map","c","toLocaleDateString","DeleteOutlined","onClick","_id","window","confirm"],"mappings":"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","file":"static/js/39.3216091d.chunk.js","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nconst AdminNav = () => {\n  return (\n    <nav>\n      <ul className=\"nav flex-column\">\n        <li className=\"nav-item\">\n          <Link to=\"/admin/dashboard\" className=\"nav-link\">\n            Dashboard\n          </Link>\n        </li>\n\n        <li className=\"nav-item\">\n          <Link to=\"/admin/product\" className=\"nav-link\">\n            Product\n          </Link>\n        </li>\n\n        <li className=\"nav-item\">\n          <Link to=\"/admin/products\" className=\"nav-link\">\n            Products\n          </Link>\n        </li>\n\n        <li className=\"nav-item\">\n          <Link to=\"/admin/category\" className=\"nav-link\">\n            Category\n          </Link>\n        </li>\n\n        <li className=\"nav-item\">\n          <Link to=\"/admin/sub\" className=\"nav-link\">\n            Sub Category\n          </Link>\n        </li>\n\n        <li className=\"nav-item\">\n          <Link to=\"/admin/coupon\" className=\"nav-link\">\n            Coupons\n          </Link>\n        </li>\n\n        <li className=\"nav-item\">\n          <Link to=\"/user/password\" className=\"nav-link\">\n            Password\n          </Link>\n        </li>\n      </ul>\n    </nav>\n  );\n};\n\nexport default AdminNav;\n","import axios from \"axios\";\n\nexport const getCoupons = async () => {\n  return await axios.get(`${process.env.REACT_APP_API}/coupons`);\n};\n\nexport const removeCoupon = async (couponId, authtoken) => {\n  return await axios.delete(`${process.env.REACT_APP_API}/coupon/${couponId}`, {\n    headers: {\n      authtoken,\n    },\n  });\n};\n\nexport const createCoupon = async (coupon, authtoken) => {\n  return await axios.post(\n    `${process.env.REACT_APP_API}/coupon`,\n    { coupon },\n    {\n      headers: {\n        authtoken,\n      },\n    }\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { toast } from \"react-toastify\";\nimport DatePicker from \"react-datepicker\";\nimport {\n  getCoupons,\n  removeCoupon,\n  createCoupon,\n} from \"../../../functions/coupon\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport { DeleteOutlined } from \"@ant-design/icons\";\nimport AdminNav from \"../../../components/nav/AdminNav\";\n\nconst CreateCouponPage = () => {\n  const [name, setName] = useState(\"\");\n  const [expiry, setExpiry] = useState(\"\");\n  const [discount, setDiscount] = useState(\"\");\n  const [loading, setLoading] = useState(\"\");\n  const [coupons, setCoupons] = useState([]);\n\n  const { user } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadAllCoupons();\n  }, []);\n\n  const loadAllCoupons = () => getCoupons().then((res) => setCoupons(res.data));\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setLoading(true);\n    createCoupon({ name, expiry, discount }, user.token)\n      .then((res) => {\n        console.log(res);\n        setLoading(false);\n        loadAllCoupons();\n        setName(\"\");\n        setDiscount(\"\");\n        setExpiry(\"\");\n        if (res.data.errors.name.message) {\n          toast.error(`${res.data.errors.name.message}. Pls, try again`);\n        } else {\n          toast.success(`${res.data.name} is created`);\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleRemove = (couponId) => {\n    if (window.confirm(\"You want to Delete ?\")) {\n      setLoading(true);\n      removeCoupon(couponId, user.token)\n        .then((res) => {\n          loadAllCoupons();\n          setLoading(false);\n          toast.error(`${res.data.name} deleted`);\n        })\n        .catch((err) => console.log(err));\n    }\n  };\n\n  return (\n    <div className=\"container-fluid\">\n      <div className=\"row\">\n        <div className=\"col-md-2\">\n          <AdminNav />\n        </div>\n        <div className=\"col-md-10\">\n          {loading ? (\n            <h4 className=\"text-danger\">Loading...</h4>\n          ) : (\n            <h4>Coupon</h4>\n          )}\n          <form onSubmit={handleSubmit}>\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Name</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                onChange={(e) => setName(e.target.value)}\n                value={name}\n                autoFocus\n                required\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Discount %</label>\n              <input\n                type=\"text\"\n                className=\"form-control\"\n                onChange={(e) => setDiscount(e.target.value)}\n                value={discount}\n                required\n              />\n            </div>\n\n            <div className=\"form-group\">\n              <label className=\"text-muted\">Expiry</label>\n              <br />\n              <DatePicker\n                className=\"form-control\"\n                selected={new Date()}\n                onChange={(date) => setExpiry(date)}\n                value={expiry}\n                required\n              />\n            </div>\n\n            <button className=\"btn btn-outline-primary\">Save</button>\n          </form>\n          <br />\n\n          <h4>{coupons.length} Coupons</h4>\n          <table className=\"table table-bordered\">\n            <thead className=\"thead-light\">\n              <tr>\n                <th scope=\"col\">Name</th>\n                <th scope=\"col\">Expiry</th>\n                <th scope=\"col\">Discount</th>\n                <th scope=\"col\">Action</th>\n              </tr>\n            </thead>\n            <tbody>\n              {coupons &&\n                coupons.map((c) => (\n                  <tr key={c._id}>\n                    <td>{c.name}</td>\n                    <td>{new Date(c.expiry).toLocaleDateString()}</td>\n                    <td>{c.discount}</td>\n                    <td>\n                      <DeleteOutlined\n                        onClick={() => handleRemove(c._id)}\n                        className=\"text-danger pointer\"\n                      />\n                    </td>\n                  </tr>\n                ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreateCouponPage;\n"],"sourceRoot":""}